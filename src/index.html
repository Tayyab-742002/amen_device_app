<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AMEN Vehicle Tracking</title>
  <link href='https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css' rel='stylesheet' />
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar with vehicle and organization info -->
    <aside class="sidebar">
      <div class="logo">
        <span id="logo-text">AMEN</span>
      </div>
      
      <!-- Organization, Vehicle, and Status grouped into one box -->
      <div class="section info-section">
        <h2>Info</h2>
        <div id="organization-info" class="info-container">
          <div class="loading">Loading organization details...</div>
        </div>
        <div id="vehicle-info" class="info-container">
          <div class="loading">Loading vehicle details...</div>
        </div>
        <div class="status-indicator">
          <span id="connection-status">Connecting...</span>
          <span id="status-icon" class="status-connecting"></span>
        </div>
        <div id="coordinates" class="coordinates">
          <div><strong>Latitude:</strong> <span id="latitude">--</span></div>
          <div><strong>Longitude:</strong> <span id="longitude">--</span></div>
          <div><strong>Speed:</strong> <span id="speed">--</span> km/h</div>
        </div>
      </div>
      
      <!-- Route Information section -->
      <div class="section routes-section">
        <h2>Route Information</h2>
        <div id="route-info" class="routes-container">
          <!-- Route info will be displayed here -->
          <div class="loading">Loading route details...</div>
        </div>
      </div>
      
      <!-- Actions section -->
      <div class="actions">
        <button id="reset-config" class="btn btn-danger">Reset Configuration</button>
      </div>
    </aside>
    
    <!-- Main content with map -->
    <main class="main-content">
      <div class="map-container">
        <div id="map"></div>
      </div>
      
      <div class="controls">
        <div class="control-group">
          <label for="pickup-points">Available Pickup Points:</label>
          <div id="pickup-points-count" class="info-label">Loading pickup points...</div>
        </div>
        
        <div class="button-group">
          <button id="show-all-routes-details" class="btn btn-secondary">Refresh Routes</button>
          <button id="start-route" class="btn btn-primary">Start Route</button>
          <button id="emergency-alert" class="btn btn-danger">🚨 Emergency</button>
          
          <!-- Passenger Counters moved to bottom bar -->
          <div class="bottom-counters">
            <div class="mini-counter">
              <span class="mini-counter-label">Total</span>
              <span class="mini-counter-value" id="total-passengers">0</span>
            </div>
            <div class="mini-counter">
              <span class="mini-counter-label">Verified</span>
              <span class="mini-counter-value" id="verified-passengers">0</span>
            </div>
            <div class="mini-counter">
              <span class="mini-counter-label">Remaining</span>
              <span class="mini-counter-value" id="remaining-passengers">0</span>
            </div>
          </div>
        </div>
      </div>
    </main>
    
    <!-- Right sidebar - User Images -->
    <aside class="sidebar right-sidebar">
      <div class="section user-images-section">
        <h2>User Images</h2>
        <div id="user-images-container" class="user-images-grid">
          <div class="loading">Loading user images...</div>
        </div>
        <div class="actions right-sidebar-actions">
          <button id="refresh-images" class="btn btn-secondary">Refresh Images</button>
          <button id="download-images" class="btn btn-primary">Download Images</button>
          <button id="verify-user" class="btn btn-accent">User Verification</button>
        </div>
      </div>
      

    </aside>
  </div>

  <!-- Emergency Alert Modal -->
  <div id="emergency-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>🚨 Emergency Alert</h2>
        <span class="close-modal">&times;</span>
      </div>
      <div class="modal-body">
        <p>Select the type of emergency to send an alert to all users:</p>
        <div class="emergency-buttons">
          <button class="emergency-btn accident-btn" data-type="accident">
            <span class="emergency-icon">🚗</span>
            <span class="emergency-text">Accident</span>
          </button>
          <button class="emergency-btn breakdown-btn" data-type="breakdown">
            <span class="emergency-icon">🔧</span>
            <span class="emergency-text">Breakdown</span>
          </button>
          <button class="emergency-btn medical-btn" data-type="medical">
            <span class="emergency-icon">🏥</span>
            <span class="emergency-text">Medical</span>
          </button>
          <button class="emergency-btn security-btn" data-type="security">
            <span class="emergency-icon">🔒</span>
            <span class="emergency-text">Security</span>
          </button>
          <button class="emergency-btn weather-btn" data-type="weather">
            <span class="emergency-icon">🌧️</span>
            <span class="emergency-text">Weather</span>
          </button>
          <button class="emergency-btn route-change-btn" data-type="route_change">
            <span class="emergency-icon">🛣️</span>
            <span class="emergency-text">Route Change</span>
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
  <script src="js/supabase.js"></script>
  <script src="js/map.js"></script>
  <script src="js/app.js"></script>
</body>
</html> 